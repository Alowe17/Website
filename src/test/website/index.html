<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–∏ –ö–Ω–∏–≥–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .book-list {
            margin: 20px 0;
        }
        .book-item {
            padding: 10px;
            border: 1px solid #ddd;
            margin: 5px 0;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–Ω–∏–≥</h1>
    
    <button onclick="loadBooks()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥–∏</button>
    
    <div id="bookList" class="book-list">
        <!-- –ö–Ω–∏–≥–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
    </div>

    <script>
        async function loadBooks() {
    try {
        console.log("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ Spring...");
        
        // 1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET –∑–∞–ø—Ä–æ—Å –∫ —Ç–≤–æ–µ–º—É Spring endpoint
        const response = await fetch('/books');
        
        // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—Ç–≤–µ—Ç —É—Å–ø–µ—à–Ω—ã–π
        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + response.status);
        }
        
        // 3. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –≤ JavaScript –æ–±—ä–µ–∫—Ç
        const books = await response.json();
        
        console.log("–ü–æ–ª—É—á–∏–ª–∏ –∫–Ω–∏–≥–∏:", books);
        
        // 4. –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–Ω–∏–≥–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        displayBooks(books);
        
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞:", error);
        alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥–∏: " + error.message);
    }
}

function displayBooks(books) {
    const bookListElement = document.getElementById('bookList');
    
    if (books.length === 0) {
        bookListElement.innerHTML = "<p>–ö–Ω–∏–≥ –Ω–µ—Ç</p>";
        return;
    }
    
    // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏
    let html = '<h2>–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥:</h2>';
    books.forEach(book => {
        html += `<div class="book-item">üìñ ${book}</div>`;
    });
    
    bookListElement.innerHTML = html;
}
    </script>
</body>
</html>