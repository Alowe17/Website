<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Профиль — RoleMaster</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/profile.css}">
    <link rel="icon" th:href="@{/images/favicon.ico}">
</head>
<body>
    <header class="main-header">
        <h1 class="main-title">☁️ RoleMaster</h1>

        <nav class="header-nav">
            <a th:href="@{/index}">
                <button class="nav-button" type="button">Главная</button>
            </a>
            <a th:href="@{/profile}">
                <button class="nav-button active" type="button">Профиль</button>
            </a>
            <a th:href="@{/in-development}">
                <button class="nav-button" type="button">Сюжет</button>
            </a>
            <a sec:authorize="hasAnyRole('ADMINISTRATOR', 'GOD')" th:href="@{/admin}">
                <button class="nav-button admin-button" type="button">Админ панель</button>
            </a>
        </nav>
        
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="nav-button logout-button">Выйти из аккаунта</button>
        </form>
    </header>

    <main class="profile-main-container">
        <div class="profile-card info-card-block">
            <h2 class="profile-welcome-title">Добро пожаловать, <span th:text="${user.name}"></span>!</h2>
            
            <div class="user-stats-container">
                <h3 class="card-title">✨ Ваша Облачная Идентичность</h3>

                <div class="info-group">
                    <h4>Имя: <span th:text="${user.name}"></span></h4>
                    <h4>Никнейм: <span th:text="${user.username}"></span></h4>
                    <h4>Почта: <span th:text="${user.email}"></span></h4>
                    <h4>Номер телефона: <span th:text="${user.phone}"></span></h4>
                    <h4>День рождения: <span th:text="${user.birthdate}"></span></h4>
                </div>

                <div class="info-group game-stats">
                    <h4>Баланс: <span class="balance-amount" th:text="${user.balance}"></span></h4>
                    <h4 th:switch="${user.role.name()}">Роль: 
                        <span th:case="'USER'" class="role-style role-user">Игрок</span>
                        <span th:case="'REGULAR_USER'" class="role-style role-regular-user">Регулярный игрок</span>
                        <span th:case="'EMPLOYEE'" class="role-style role-employee">Сотрудник</span>
                        <span th:case="'SECURITY_GUARD'" class="role-style role-security-guard">Охранник</span>
                        <span th:case="'MANAGER'" class="role-style role-manager">Менеджер</span>
                        <span th:case="'POLICE_OFFICER'" class="role-style role-police-officer">Полицейский</span>
                        <span th:case="'OWNER'" class="role-style role-owner">Владелец</span>
                        <span th:case="'ADMINISTRATOR'" class="role-style role-administrator">Администратор</span>
                        <span th:case="'GOD'" class="role-style role-god">Бог</span>
                        <span th:case="*" class="role-style role-noname">Роль не определена</span>
                    </h4>
                    <h4 th:switch="${user.progress_level}">Уровень прохождения: 
                        <span th:case="1" class="progress-style progress-level-1">0/4</span>
                        <span th:case="2" class="progress-style progress-level-2">1/4</span>
                        <span th:case="3" class="progress-style progress-level-3">2/4</span>
                        <span th:case="4" class="progress-style progress-level-4">3/4</span>
                        <span th:case="5" class="progress-style progress-level-5">4/4</span>
                        <span th:case="*" class="progress-style progress-noname">Уровень не определен!</span>
                    </h4>
                </div>
            </div>
            
            <hr class="card-divider"/>

            <div class="settings-section">
                <h3 class="card-title">Настройка Облачного ID</h3>
                
                <form th:action="@{/in-development}" class="update-form">
                    <div class="input-group">
                        <label for="new-name">Имя:</label>
                        <input type="text" id="new-name" placeholder="Новое имя" th:value="${user.name}"/>
                        <button type="submit" class="edit-button" data-field="name">Изменить</button>
                    </div>

                    <div class="input-group">
                        <label for="new-username">Никнейм:</label>
                        <input type="text" id="new-username" placeholder="Новый никнейм" th:value="${user.username}"/>
                        <button type="submit" class="edit-button" data-field="username">Изменить</button>
                    </div>

                    <div class="input-group">
                        <label for="new-email">Почта:</label>
                        <input type="email" id="new-email" placeholder="Новая почта" th:value="${user.email}"/>
                        <button type="submit" class="edit-button" data-field="email">Изменить</button>
                    </div>

                    <div class="input-group">
                        <label for="new-phone">Телефон:</label>
                        <input type="text" id="new-phone" placeholder="Новый номер телефона" th:value="${user.phone}"/>
                        <button type="submit" class="edit-button" data-field="phone">Изменить</button>
                    </div>

                    <div class="input-group">
                        <label for="new-password">Пароль:</label>
                        <input type="password" id="new-password" placeholder="Введите новый пароль"/>
                        <button type="submit" class="edit-button" data-field="password">Сменить</button>
                    </div>
                </form>

                <p class="password-reset-link">
                    Если Вы забыли пароль, то можете его восстановить через эту <a class="link" th:href="@{/in-development}">ссылку</a>.
                </p>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <p>Произведено с любовью командой <strong>alowe17</strong>.</p>
            <p>© 2025 RoleMaster. Все права защищены.</p>
            <div class="footer-links">
                <a href="p.danil51007@gmail.com">Почта</a>
                <span>•</span>
                <span>Telegram: @Danya_JavaCoder</span>
                <span>•</span>
                <a href="https://github.com/alowe17">GitHub: Alowe17</a>
            </div>
        </div>
    </footer>
</body>
</html>